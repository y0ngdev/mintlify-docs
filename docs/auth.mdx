---
title: Authentication
description: 'Securely authenticating with the  API'
---

You'll need a **root key** for almost every API call. This key confirms your identity and your specific permissions,
determining what you're allowed to do.

## Using Bearer Tokens

We use standard **Bearer Authentication**. This means you must include an `Authorization` header with your root key in
every request.

The format is:

```bash
Authorization: Bearer locket_1234567890
```

**Example `curl` Request:**

```bash
curl -X POST "https://api.example.com/keys/create" \
  -H "Authorization: Bearer locket_1234567890" \
  -H "Content-Type: application/json" \
  -d '{ "apiId": "api_1234" }'
```

### Key Security Best Practices

**Never** expose your root key in your frontend (client-side) code, such as in a React or Vue application. Never include
it in a public Git repository.

For web or mobile apps, you should always proxy your requests through a secure backend server, where the root key can be
stored safely.

### Managing Your Root Keys

You can create and manage all your root keys from the locket dashboard. For best security and manageability, we
recommend you:

1. **Use Separate Keys**: Create different root keys for your development, staging, and production environments.
2. **Rotate Keys Regularly**: Periodically create new keys and delete old ones to limit exposure.
3. **Use Clear Names**: Name your keys descriptively (e.g., "Production-User-Service") so you know what each one is for.

### How Permissions Work (RBAC)

Root keys use a powerful **Role-Based Access Control (RBAC)** system. Permissions are defined as a "tuple" (a specific
set) of three parts:

`ResourceType.ResourceID.Action`

This breaks down as follows:

* **ResourceType**: The category of the resource.
* **ResourceID**: The specific ID of the resource (or `*` for a wildcard).
* **Action**: The operation you want to perform (e.g., `read_api`).

**Main Resource Types:**

| Resource Type | Description                                     |
|---------------|-------------------------------------------------|
| `api`         | Manages your APIs and their keys.               |
| `rbac`        | Manages the permissions and roles themselves.   |
| `identity`    | Manages users and identities.                   |

This system lets you be very specific or use a wildcard (`*`) for broader access.

**Permission Examples:**

To grant permissions to read and update *one specific* API:

```
api.api_1234.read_api
api.api_1234.update_api
```


### Handling Auth Errors

If your authentication fails, you'll receive an error response. The two most common are:

**401 Unauthorized**
This means your key is invalid, missing, or has been revoked.

```json
{
  "meta": {
    "requestId": "req_abc123xyz789"
  },
  "error": {
    "title": "Unauthorized",
    "detail": "The provided root key is invalid or has been revoked",
    "status": 401
    
  }
}
```

**403 Forbidden**
This means your key is valid, but it doesn't have the *specific permission* required for that action.

```json
{
  "meta": {
    "requestId": "req_abc123xyz789"
  },
  "error": {
    "title": "Forbidden",
    "detail": "Your key does not have the required 'api.api_1234.update_api' permission",
    "status": 403
  }
}
```

**Common problems to check:**

* Did you forget the `Authorization` header?
* Is the key spelled correctly?
* Has the key been revoked or deleted in the dashboard?
* Does the key have the correct permissions for this specific action?